"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.abstract = void 0;
const subscriptions = {};
const subscribe = (eventName, callback) => {
    if (!subscriptions[eventName]) {
        subscriptions[eventName] = new Set();
    }
    const callbacks = subscriptions[eventName];
    callbacks.add(callback);
    return () => {
        callbacks.delete(callback);
        if (callbacks.size === 0) {
            delete subscriptions[eventName];
        }
    };
};
const broadcast = async (eventName, ...args) => {
    if (!subscriptions[eventName])
        return;
    const callbacks = subscriptions[eventName];
    for (const callback of Array.from(callbacks)) {
        await callback(...args);
    }
};
exports.abstract = {
    subscribe,
    broadcast
};
